(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(2596),n=r(9688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},4871:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var a=r(5155),n=r(2115),l=r(8482),o=r(2596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=o.$;var d=r(3999);let c=((e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:l}=t,o=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let o=s(t)||s(a);return n[e][o]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return i(e,o,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...d}[t]):({...l,...d})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)})("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,d.cn)(c({variant:r}),t),...n})}var h=r(6766);let m=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var x={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let g=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:s="",children:i,iconNode:d,...c}=e;return(0,n.createElement)("svg",{ref:t,...x,width:a,height:a,stroke:r,strokeWidth:o?24*Number(l)/Number(a):l,className:p("lucide",s),...c},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(i)?i:[i]])}),f=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{className:l,...o}=r;return(0,n.createElement)(g,{ref:a,iconNode:t,className:p("lucide-".concat(m(e)),l),...o})});return r.displayName="".concat(e),r},y=f("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),w=f("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),v=f("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),b=f("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),j=[{type:"tier1",name:"Tier 1 Datacenter",cost:1e7,specs:"1,000 servers • 5MW power",color:"bg-green-500",textColor:"text-green-600"},{type:"tier2",name:"Tier 2 Datacenter",cost:1e8,specs:"5,000 servers • 35MW power",color:"bg-yellow-500",textColor:"text-yellow-600"},{type:"tier3",name:"Tier 3 Datacenter",cost:5e8,specs:"15,000 servers • 75MW power",color:"bg-orange-500",textColor:"text-orange-600"},{type:"tier4",name:"Tier 4 Datacenter",cost:1e9,specs:"30,000 servers • 100MW power",color:"bg-red-500",textColor:"text-red-600"}];function N(e){let{selectedDatacenterType:t,budget:r,onSelectDatacenterType:n,gameStarted:l}=e,o=e=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return l?(0,a.jsx)("div",{className:"absolute bottom-4 left-4 z-40 space-y-2",children:j.map(e=>{let l=r<e.cost,s=t===e.type;return(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsx)("button",{onClick:()=>!l&&n(e.type),disabled:l,className:"\n                w-12 h-12 rounded-lg border-2 border-white shadow-lg transition-all duration-300\n                ".concat(e.color," \n                ").concat(l?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-110","\n                ").concat(s?"ring-4 ring-primary/50 scale-110":"","\n                ").concat(l?"":"hover:shadow-xl","\n                flex items-center justify-center\n              "),title:e.name,children:(0,a.jsx)(b,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{className:" absolute left-16 top-0 bg-white rounded-lg shadow-xl border p-3 min-w-48 z-50 opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none group-hover:pointer-events-auto transform translate-x-2 group-hover:translate-x-0 ",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 ".concat(e.color," rounded-lg flex-shrink-0 flex items-center justify-center"),children:(0,a.jsx)(b,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm ".concat(e.textColor," mb-1"),children:e.name}),(0,a.jsx)(u,{variant:"secondary",className:"mb-2 ".concat(l?"bg-red-100 text-red-700":""),children:o(e.cost)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:e.specs}),l&&(0,a.jsx)("p",{className:"text-xs text-destructive font-medium",children:"Insufficient funds"}),s&&!l&&(0,a.jsx)("p",{className:"text-xs text-primary font-medium",children:"Selected - Click map to place"}),!l&&!s&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Click to select"})]})]}),(0,a.jsx)("div",{className:"absolute left-0 top-4 w-2 h-2 bg-white border-l border-t transform -translate-x-1 -translate-y-1 rotate-45"})]})]},e.type)})}):null}let M={north:-30.98,south:-39.13,west:140.96,east:151},k=(e,t,r,a)=>({x:(t-M.west)/(M.east-M.west)*r,y:(M.north-e)/(M.north-M.south)*a}),C=(e,t,r,a)=>{let n=M.west+e/r*(M.east-M.west);return{lat:M.north-t/a*(M.north-M.south),lng:n}},L=[{id:"melbourne",name:"Melbourne",lat:-37.8136,lng:144.9631,population:5078e3},{id:"portland",name:"Portland",lat:-38.3444,lng:141.6047,population:10600},{id:"ballarat",name:"Ballarat",lat:-37.5622,lng:143.8503,population:113e3},{id:"horsham",name:"Horsham",lat:-36.711,lng:142.1996,population:17e3},{id:"bendigo",name:"Bendigo",lat:-36.757,lng:144.2794,population:124e3},{id:"shepparton",name:"Shepparton",lat:-36.3773,lng:145.3996,population:68e3},{id:"swan_hill",name:"Swan Hill",lat:-35.3377,lng:143.5544,population:11e3},{id:"geelong",name:"Geelong",lat:-38.1499,lng:144.3617,population:289e3},{id:"mildura",name:"Mildura",lat:-34.2082,lng:142.1245,population:56500},{id:"sale",name:"Sale",lat:-38.1097,lng:147.0686,population:15e3},{id:"orbost",name:"Orbost",lat:-37.7,lng:148.45,population:2e3}],S=[{id:"loy_yang",name:"Loy Yang Power Station",lat:-38.2333,lng:146.5833,capacity:2200,type:"coal",powerLevel:100},{id:"hazelwood",name:"Hazelwood Power Station",lat:-38.2667,lng:146.3833,capacity:1600,type:"coal",powerLevel:100},{id:"yallourn",name:"Yallourn Power Station",lat:-38.1667,lng:146.35,capacity:1480,type:"coal",powerLevel:100},{id:"kiewa",name:"Kiewa Hydroelectric Scheme",lat:-36.7167,lng:147.0833,capacity:400,type:"hydro",powerLevel:100},{id:"eildon",name:"Eildon Hydroelectric Station",lat:-37.2333,lng:145.9167,capacity:120,type:"hydro",powerLevel:100}],z=e=>e>=1e6?{category:"Capital City",icon:y,size:60,color:"bg-purple-600"}:e>=5e5?{category:"Regional City",icon:w,size:48,color:"bg-blue-600"}:e>=1e4?{category:"Regional Town",icon:w,size:36,color:"bg-blue-500"}:e>=5e3?{category:"Large Town",icon:v,size:24,color:"bg-blue-400"}:{category:"Small Town",icon:v,size:24,color:"bg-blue-300"},D=(e,t,r,a)=>{let n=null,l=1/0,o=0;return a.forEach(a=>{let s=Math.sqrt(Math.pow(e-a.x,2)+Math.pow(t-a.y,2));s<l&&(l=s,n=a,o=.05*(a.capacity*a.powerLevel/100)/r)}),{generator:n,distance:l,powerCoverage:o,hasEnoughPower:o>=1}},E=(0,n.forwardRef)((e,t)=>{let{datacenters:r,populationCenters:l,powerGenerators:o,onPlaceDatacenter:s,onUpdateDatacenter:i,selectedDatacenter:d,onSelectDatacenter:c,selectedDatacenterType:u,selectedPowerGenerator:m,onSelectPowerGenerator:p,onUpgradePowerGenerator:x,onDowngradePowerGenerator:g,calculateUpgradeCost:f,gameStarted:y,onStartGame:w,onResetGame:v,budget:j,onSelectDatacenterType:M,onAverageLatencyChange:E}=e,[P,W]=(0,n.useState)({width:600,height:600}),[A,R]=(0,n.useState)(null),[B,T]=(0,n.useState)(null),[I,Y]=(0,n.useState)({isDragging:!1,datacenterId:null,startX:0,startY:0,currentX:0,currentY:0});(0,n.useEffect)(()=>{let e=()=>{if(t&&"function"!=typeof t&&t.current){let e=t.current.getBoundingClientRect();W({width:e.width,height:e.height})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]);let H=(0,n.useCallback)(e=>{var r;if(m&&p(null),!y||!u||!t||"function"==typeof t)return;let a=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect();if(!a)return;let n=e.clientX-a.left,l=e.clientY-a.top;s(Math.max(0,Math.min(n,P.width)),Math.max(0,Math.min(l,P.height)),u),T(null)},[y,u,s,t,P,m,p]),X=(0,n.useCallback)(e=>{var r;if(!y||!u||!t||"function"==typeof t)return;let a=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect();if(!a)return;let n=e.clientX-a.left,l=e.clientY-a.top;T({x:Math.max(0,Math.min(n,P.width)),y:Math.max(0,Math.min(l,P.height))})},[y,u,t,P]),F=(0,n.useCallback)(()=>{T(null)},[]),O=(e,t,r,a)=>{let n=C(e,t,P.width,P.height),l=C(r,a,P.width,P.height),o=(l.lat-n.lat)*Math.PI/180,s=(l.lng-n.lng)*Math.PI/180,i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n.lat*Math.PI/180)*Math.cos(l.lat*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},U=L.map(e=>({...e,...k(e.lat,e.lng,P.width,P.height)})),G=S.map(e=>{let t=o.find(t=>t.id===e.id);return{...e,powerLevel:(null==t?void 0:t.powerLevel)||100,...k(e.lat,e.lng,P.width,P.height)}}),$=(0,n.useCallback)((e,r)=>{var a;if(!y||d!==r)return;e.stopPropagation();let n=t&&"function"!=typeof t&&(null===(a=t.current)||void 0===a?void 0:a.getBoundingClientRect());if(!n)return;let l=e.clientX-n.left,o=e.clientY-n.top;Y({isDragging:!0,datacenterId:r,startX:l,startY:o,currentX:l,currentY:o})},[y,d,t]),q=(0,n.useCallback)(e=>{var r;if(!I.isDragging||!t||"function"==typeof t)return;let a=null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect();if(!a)return;let n=e.clientX-a.left,l=e.clientY-a.top,o=Math.max(0,Math.min(n,P.width)),s=Math.max(0,Math.min(l,P.height));Y(e=>({...e,currentX:o,currentY:s}))},[I.isDragging,t,P]),_=(0,n.useCallback)(()=>{I.isDragging&&I.datacenterId&&(i(I.datacenterId,I.currentX,I.currentY),Y({isDragging:!1,datacenterId:null,startX:0,startY:0,currentX:0,currentY:0}))},[I,i]);(0,n.useEffect)(()=>{if(I.isDragging)return document.addEventListener("mousemove",q),document.addEventListener("mouseup",_),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",_)}},[I.isDragging,q,_]),(0,n.useEffect)(()=>{if(!d&&r.length>0){let e=[];r.forEach(t=>{let r=[];if(U.forEach(e=>{let a=Math.round(.05*O(t.x,t.y,e.x,e.y));r.push(a)}),r.length>0){let t=Math.round(r.reduce((e,t)=>e+t,0)/r.length);e.push(t)}}),e.length>0&&(e.reduce((e,t)=>e+t,0),e.length)}else d||0!==r.length||E(0)},[d,r,E]);let V=(e,t,r,a)=>{let n=e+20+r>P.width-8,l=t+0+a>P.height-8,o=20,s=0;return n?o=-r-20:e+20-r<8&&(o=20),l?s=-(a+0):t+0-a<8&&(s=0),{left:o,top:s}};return(0,a.jsxs)("div",{ref:t,className:"relative w-full h-full overflow-hidden rounded-lg ".concat(u?"cursor-crosshair":"cursor-default"),onClick:H,onMouseMove:X,onMouseLeave:F,children:[y&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),v()},className:"absolute top-2 left-2 z-30 w-8 h-8 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-colors",title:"Reset Game",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 ".concat(P.width," ").concat(P.height),children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("pattern",{id:"water",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:[(0,a.jsx)("rect",{width:"4",height:"4",fill:"#bfdbfe"}),(0,a.jsx)("path",{d:"M 0,4 l 4,-4 M -1,1 l 2,-2 M 3,5 l 2,-2",stroke:"#93c5fd",strokeWidth:"0.5"})]}),(0,a.jsx)("style",{children:"\n                @keyframes powerWarning {\n                  0%, 100% { \n                    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);\n                    border-color: rgb(239, 68, 68);\n                  }\n                  50% { \n                    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.3);\n                    border-color: rgb(220, 38, 38);\n                  }\n                }\n                .power-warning {\n                  animation: powerWarning 1.5s ease-in-out infinite;\n                }\n              "})]}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#water)",opacity:"0.1"}),(0,a.jsx)("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",children:(0,a.jsx)("div",{className:"w-full h-full relative overflow-hidden",children:(0,a.jsx)(h.default,{src:"/images/vic.png",alt:"Victoria state outline",fill:!0,className:"object-cover opacity-80",priority:!0})})}),(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"rgba(0,0,0,0.03)",strokeWidth:"1"})})}),(0,a.jsx)("rect",{width:"100%",height:"80%",fill:"url(#grid)"})]}),(0,a.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:0},children:r.map(e=>{let t=I.isDragging&&I.datacenterId===e.id,r=t?I.currentX:e.x,n=t?I.currentY:e.y,l=D(r,n,e.powerConsumption,G);return l.generator?(0,a.jsx)("g",{children:(0,a.jsx)("line",{x1:r,y1:n,x2:l.generator.x,y2:l.generator.y,stroke:l.hasEnoughPower?"rgba(234, 179, 8, 0.8)":"rgba(239, 68, 68, 0.8)",strokeWidth:"2",strokeDasharray:"4,4",style:{animation:l.hasEnoughPower?"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite":"pulse 0.5s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})},"power-".concat(e.id)):null})}),U.map(e=>{let t=V(e.x,e.y,180,80),r=z(e.population),n=r.icon;return(0,a.jsxs)("div",{className:"absolute group z-10",style:{left:e.x,top:e.y},children:[(0,a.jsx)("div",{className:"".concat(r.color," rounded-full border-2 border-white shadow-lg cursor-pointer transform -translate-x-1/2 -translate-y-1/2 hover:scale-110 transition-transform flex items-center justify-center"),style:{width:"".concat(r.size,"px"),height:"".concat(r.size,"px")},onMouseEnter:()=>R(e.id),onMouseLeave:()=>R(null),children:(0,a.jsx)(n,{className:"text-white",style:{width:"".concat(Math.max(r.size-12,36),"px"),height:"".concat(Math.max(r.size-12,36),"px")}})}),A===e.id&&(0,a.jsxs)("div",{className:"absolute bg-white px-3 py-2 rounded-lg shadow-lg text-xs font-medium z-50 border max-w-48",style:{left:t.left,top:t.top},children:[(0,a.jsx)("div",{className:"font-semibold text-blue-600",children:e.name}),(0,a.jsx)("div",{className:"text-muted-foreground",children:r.category}),(0,a.jsx)("div",{className:"text-muted-foreground",children:e.population>=1e6?"".concat((e.population/1e6).toFixed(1),"M people"):"".concat((e.population/1e3).toFixed(0),"K people")})]})]},e.id)}),d&&(0,a.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:5},children:(()=>{let e=r.find(e=>e.id===d);if(!e)return null;let t=I.isDragging&&I.datacenterId===d,n=t?I.currentX:e.x,l=t?I.currentY:e.y,o=[],s=U.map(e=>{let t=Math.round(.05*O(n,l,e.x,e.y));return o.push(t),(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:n,y1:l,x2:e.x,y2:e.y,stroke:"rgba(234, 88, 12, 0.8)",strokeWidth:"3",strokeDasharray:"8,4",className:"animate-pulse"}),(0,a.jsx)("circle",{cx:(n+e.x)/2,cy:(l+e.y)/2,r:"15",fill:"white",stroke:"rgb(234, 88, 12)",strokeWidth:"2"}),(0,a.jsxs)("text",{x:(n+e.x)/2,y:(l+e.y)/2+4,fill:"rgb(234, 88, 12)",fontSize:"11",fontWeight:"bold",textAnchor:"middle",children:[t,"ms"]})]},e.id)});if(o.length>0){o.reduce((e,t)=>e+t,0),o.length;let e=[];r.forEach(t=>{let r=[];if(U.forEach(e=>{let a=Math.round(.05*O(t.x,t.y,e.x,e.y));r.push(a)}),r.length>0){let t=Math.round(r.reduce((e,t)=>e+t,0)/r.length);e.push(t)}}),E(e.length>0?Math.round(e.reduce((e,t)=>e+t,0)/e.length):0)}return s})()}),r.map(e=>{let t=I.isDragging&&I.datacenterId===e.id,r=t?I.currentX:e.x,n=t?I.currentY:e.y,l=D(r,n,e.powerConsumption,G),o=l.generator&&!l.hasEnoughPower;return(0,a.jsxs)("div",{className:"group z-10",style:{position:"absolute",left:r,top:n},children:[(0,a.jsx)("div",{className:"w-7 h-7 ".concat((e=>e.cost<=1e7?"bg-green-500":e.cost<=1e8?"bg-yellow-500":e.cost<=5e8?"bg-orange-500":"bg-red-500")(e)," rounded-lg border-2 shadow-lg cursor-pointer transform -translate-x-1/2 -translate-y-1/2 transition-all hover:scale-105 flex items-center justify-center ").concat(o?"border-red-500 ring-2 ring-red-500 power-warning":"border-white"," ").concat(d===e.id?"ring-4 ring-primary/50 scale-110":""," ").concat(d===e.id&&y?"cursor-move":""," ").concat(t?"scale-125 shadow-2xl z-50":""),onClick:t=>{t.stopPropagation(),c(e.id===d?null:e.id)},onMouseDown:t=>$(t,e.id),children:(0,a.jsx)(b,{className:"w-4 h-4 text-white"})}),(()=>{let s=V(r,n,200,120);return(0,a.jsxs)("div",{className:"bg-white px-3 py-2 rounded-lg shadow-lg text-xs font-medium opacity-0 group-hover:opacity-100 transition-opacity z-50 border max-w-48 ".concat(t?"opacity-100":""),style:{left:s.left,top:s.top},children:[(0,a.jsx)("div",{className:"font-semibold ".concat(e.cost<=1e7?"text-green-600":e.cost<=1e8?"text-yellow-600":e.cost<=5e8?"text-orange-600":"text-red-600"),children:e.name}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:[e.capacity.toLocaleString()," servers • ",e.powerConsumption,"MW"]}),(()=>{let e=[];U.forEach(t=>{let a=Math.round(.05*O(r,n,t.x,t.y));e.push(a)});let t=e.length>0?Math.round(e.reduce((e,t)=>e+t,0)/e.length):0;return(0,a.jsx)("div",{className:"text-xs mt-1",children:(0,a.jsxs)("div",{className:"text-muted-foreground",children:["Avg Latency: ",(0,a.jsxs)("span",{className:"font-semibold text-blue-600",children:[t,"ms"]})]})})})(),l.generator&&(0,a.jsxs)("div",{className:"text-xs mt-1",children:[(0,a.jsxs)("div",{className:"text-muted-foreground",children:["Powered by: ",l.generator.name]}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:["Available: ",Math.round(l.generator.capacity*l.generator.powerLevel*.05/100),"MW"]}),o&&(0,a.jsxs)("div",{className:"text-red-600 font-semibold mt-1",children:["⚠️ Insufficient power! Need ",e.powerConsumption,"MW, only ",Math.round(l.generator.capacity*l.generator.powerLevel*.05/100),"MW available"]})]}),d===e.id&&y&&!t&&(0,a.jsx)("div",{className:"text-xs text-primary mt-1",children:"Click and drag to move"})]})})()]},e.id)}),G.map(e=>{let t=m===e.id,r=f(e),n=e.powerLevel<125,l=e.powerLevel>100,o="number"!=typeof e.x||isNaN(e.x)?0:e.x,s="number"!=typeof e.y||isNaN(e.y)?0:e.y,i=V(o,s,200,60),d=V(o,s,192,140);return(0,a.jsxs)("div",{className:"absolute group z-10",style:{left:o,top:s},children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-white shadow-lg cursor-pointer transform -translate-x-1/2 -translate-y-1/2 hover:scale-110 transition-transform ".concat("coal"===e.type?"bg-gray-600":"gas"===e.type?"bg-orange-500":"hydro"===e.type?"bg-blue-600":"solar"===e.type?"bg-yellow-500":"bg-green-500"," ").concat(t?"ring-4 ring-primary/50 scale-125":""," ").concat(e.powerLevel>100?"ring-2 ring-yellow-400":""),onClick:t=>{t.stopPropagation(),y&&p(e.id===m?null:e.id)},onMouseEnter:()=>R(e.id),onMouseLeave:()=>R(null)}),e.powerLevel>100&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-yellow-500 rounded-full border border-white text-xs font-bold text-white flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 z-20",children:(e.powerLevel-100)/5}),A===e.id&&(0,a.jsxs)("div",{className:"absolute bg-white px-3 py-2 rounded-lg shadow-lg text-xs font-medium z-50 border max-w-48",style:{left:i.left,top:i.top},children:[(0,a.jsx)("div",{className:"font-semibold",children:e.name}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:[Math.round(e.capacity*e.powerLevel/100),"MW • ",e.type," •"," ",e.powerLevel,"%"]})]}),t&&y&&(0,a.jsxs)("div",{className:"absolute bg-white p-3 rounded-lg shadow-xl border z-50 min-w-48",style:{left:d.left,top:d.top},children:[(0,a.jsx)("div",{className:"font-semibold text-sm mb-2",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mb-3",children:["Current: ",e.powerLevel,"% (",Math.round(e.capacity*e.powerLevel/100),"MW)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),g(e.id)},disabled:!l,className:"w-8 h-8 rounded bg-red-500 text-white font-bold disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-red-600 transition-colors",children:"-"}),(0,a.jsxs)("div",{className:"flex-1 text-center",children:[(0,a.jsxs)("div",{className:"text-sm font-medium",children:[e.powerLevel,"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:"".concat((e.powerLevel-100)/25*100,"%")}})})]}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),x(e.id)},disabled:!n,className:"w-8 h-8 rounded bg-green-500 text-white font-bold disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-green-600 transition-colors",children:"+"})]}),n&&(0,a.jsxs)("div",{className:"text-xs text-center",children:["Next upgrade: ",(0,a.jsxs)("span",{className:"font-semibold",children:["$",(r/1e6).toFixed(1),"M"]})]}),!n&&(0,a.jsx)("div",{className:"text-xs text-center text-red-600",children:"Maximum capacity reached"})]})]},e.id)}),B&&u&&(0,a.jsx)("div",{className:"absolute pointer-events-none z-10",style:{left:B.x,top:B.y},children:(()=>{let e="tier1"===u?5:"tier2"===u?35:"tier3"===u?75:100,t=D(B.x,B.y,e,G),r=t.generator&&!t.hasEnoughPower;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-7 h-7 rounded-lg border-2 shadow-lg transform -translate-x-1/2 -translate-y-1/2 opacity-70 animate-pulse flex items-center justify-center ".concat("tier1"===u?"bg-green-500":"tier2"===u?"bg-yellow-500":"tier3"===u?"bg-orange-500":"bg-red-500"," ").concat(r?"border-red-500 ring-2 ring-red-500 power-warning":"border-white"),children:(0,a.jsx)(b,{className:"w-4 h-4 text-white"})}),(()=>{let n=V(B.x,B.y,200,r?120:30);return(0,a.jsxs)("div",{className:"absolute bg-white px-2 py-1 rounded shadow-lg text-xs font-medium border max-w-48 z-50",style:{left:n.left,top:n.top},children:[(0,a.jsxs)("div",{children:["Click to place ",u.replace("tier","Tier ")," datacenter"]}),(()=>{let e=[];U.forEach(t=>{let r=Math.round(.05*O(B.x,B.y,t.x,t.y));e.push(r)});let t=e.length>0?Math.round(e.reduce((e,t)=>e+t,0)/e.length):0;return(0,a.jsx)("div",{className:"text-xs mt-1",children:(0,a.jsxs)("div",{className:"text-muted-foreground",children:["Avg Latency: ",(0,a.jsxs)("span",{className:"font-semibold text-blue-600",children:[t,"ms"]})]})})})(),t.generator&&(0,a.jsxs)("div",{className:"text-xs mt-1",children:[(0,a.jsxs)("div",{className:"text-muted-foreground",children:["Powered by: ",t.generator.name]}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:["Available: ",Math.round(t.generator.capacity*t.generator.powerLevel*.05/100),"MW"]}),r&&(0,a.jsxs)("div",{className:"text-red-600 font-semibold mt-1",children:["⚠️ Insufficient power! Need ",e,"MW, only ",Math.round(t.generator.capacity*t.generator.powerLevel*.05/100),"MW available"]})]})]})})()]})})()}),!y&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-sm z-60",children:(0,a.jsxs)("div",{className:"text-center text-white bg-black/40 p-8 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"Victorian Datacenter Simulation"}),(0,a.jsx)("p",{className:"text-lg opacity-80 mb-4",children:"A tool to simulate the placement of datacenters in Victoria"}),(0,a.jsx)("p",{className:"text-sm opacity-60 mb-6",children:"Click Start to begin"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),w()},className:"bg-primary hover:bg-primary/90 text-white px-8 py-3 rounded-lg font-semibold text-lg transition-colors",children:"Start"})]})}),(0,a.jsx)(N,{selectedDatacenterType:u,budget:j,onSelectDatacenterType:M,gameStarted:y})]})});function P(){let[e,t]=(0,n.useState)(15e8),[r,o]=(0,n.useState)([]),[s,i]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[h,m]=(0,n.useState)(null),[p,x]=(0,n.useState)(!1),[g,f]=(0,n.useState)(0),y=(0,n.useRef)(null),[w,v]=(0,n.useState)([{id:"eraring",name:"Eraring Power Station",x:430,y:340,capacity:2880,type:"coal",powerLevel:100},{id:"bayswater",name:"Bayswater Power Station",x:380,y:300,capacity:2640,type:"coal",powerLevel:100},{id:"liddell",name:"Liddell Power Station",x:370,y:290,capacity:2e3,type:"coal",powerLevel:100},{id:"tumut",name:"Tumut Hydro",x:300,y:420,capacity:1800,type:"hydro",powerLevel:100},{id:"shoalhaven",name:"Shoalhaven Hydro",x:360,y:400,capacity:240,type:"hydro",powerLevel:100}]),b=(0,n.useCallback)((r,a,n)=>{let l=n||d;if(!l||!p)return;let s={tier1:1e7,tier2:1e8,tier3:5e8,tier4:1e9}[l];if(e>=s){let e={id:"dc-".concat(Date.now()),name:"Tier ".concat(l.slice(-1)," DC"),x:r,y:a,cost:s,powerConsumption:{tier1:5,tier2:35,tier3:75,tier4:100}[l],capacity:{tier1:1e3,tier2:5e3,tier3:15e3,tier4:3e4}[l]};o(t=>[...t,e]),t(e=>e-s),c(null)}},[e,p,d]),j=(0,n.useCallback)((e,t,r)=>{o(a=>a.map(a=>a.id===e?{...a,x:t,y:r}:a))},[]),N=(0,n.useCallback)(()=>{if(!s||!p)return;let e=r.find(e=>e.id===s);e&&(o(e=>e.filter(e=>e.id!==s)),t(t=>t+e.cost),i(null))},[s,p,r]);(0,n.useEffect)(()=>{let e=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),N())};if(p)return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[p,N]);let M=e=>{let t=e.capacity,r=e.powerLevel;return Math.min(r+5,125)>125?0:Math.round(1e3*t*Math.pow(2,(r-100)/5))},k=(0,n.useCallback)(r=>{let a=w.find(e=>e.id===r);if(!a||!p)return;let n=M(a);e<n||a.powerLevel>=125||(v(e=>e.map(e=>e.id===r?{...e,powerLevel:Math.min(e.powerLevel+5,125)}:e)),t(e=>e-n))},[w,e,p]),C=(0,n.useCallback)(e=>{let r=w.find(t=>t.id===e);if(!r||!p||r.powerLevel<=100)return;let a=r.powerLevel,n=Math.round(1e3*r.capacity*Math.pow(2,(a-105)/5)*.5);v(t=>t.map(t=>t.id===e?{...t,powerLevel:Math.max(t.powerLevel-5,100)}:t)),t(e=>e+n)},[w,p]);return(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"container mx-auto p-4 h-full",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"NSW Datacenter Simulation"}),(0,a.jsx)("p",{className:"text-muted-foreground text-lg",children:"Build and manage datacenters across New South Wales. Consider latency, power, and costs."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 h-full",children:(0,a.jsx)("div",{className:"h-full",children:(0,a.jsxs)(l.Zp,{className:"min-h-[800px] h-full flex flex-col",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Victorian Simulation"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[d&&(0,a.jsxs)(u,{variant:"default",className:"bg-primary",children:[d.charAt(0).toUpperCase()+d.slice(1)," Selected"]}),(0,a.jsxs)(u,{variant:"outline",children:[r.length," Datacenter",1!==r.length?"s":""]}),(0,a.jsxs)(u,{variant:"outline",children:[g,"ms Avg Latency"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Available Budget:"}),(0,a.jsxs)("span",{className:"ml-2 font-semibold text-green-600",children:["$",(e/1e6).toFixed(1),"M"]})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Spent:"}),(0,a.jsxs)("span",{className:"ml-2 font-semibold text-red-600",children:["$",((5e7-e)/1e6).toFixed(1),"M"]})]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Budget: $1.5B"})]})]}),(0,a.jsx)(l.Wu,{className:"flex-1 p-0",children:(0,a.jsx)(E,{ref:y,datacenters:r,populationCenters:[{id:"sydney",name:"Sydney",x:400,y:350,population:5312e3},{id:"newcastle",name:"Newcastle",x:420,y:280,population:322278},{id:"wollongong",name:"Wollongong",x:380,y:380,population:302739},{id:"centralcoast",name:"Central Coast",x:410,y:320,population:333627},{id:"albury",name:"Albury",x:320,y:500,population:53677},{id:"wagga",name:"Wagga Wagga",x:280,y:450,population:56442},{id:"dubbo",name:"Dubbo",x:250,y:350,population:43516},{id:"tamworth",name:"Tamworth",x:300,y:280,population:42872}],powerGenerators:w,onPlaceDatacenter:b,onUpdateDatacenter:j,selectedDatacenter:s,onSelectDatacenter:i,selectedDatacenterType:d,selectedPowerGenerator:h,onSelectPowerGenerator:m,onUpgradePowerGenerator:k,onDowngradePowerGenerator:C,calculateUpgradeCost:M,gameStarted:p,onStartGame:()=>x(!0),onResetGame:()=>{t(15e8),o([]),i(null),c(null),m(null),v(e=>e.map(e=>({...e,powerLevel:100}))),x(!1)},budget:e,onSelectDatacenterType:t=>{p&&(e<({tier1:1e7,tier2:1e8,tier3:5e8,tier4:1e9})[t]||c(d===t?null:t))},onAverageLatencyChange:f})})]})})})]})})}E.displayName="MapComponent"},7881:(e,t,r)=>{Promise.resolve().then(r.bind(r,4871))},8482:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>o,aR:()=>s});var a=r(5155),n=r(2115),l=r(3999);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});o.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...n})});s.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"}},e=>{var t=t=>e(e.s=t);e.O(0,[930,441,684,358],()=>t(7881)),_N_E=e.O()}]);